String.prototype.width = function(fontStyle) {
  var f, o, w;
  f = fontStyle || '12px arial';
  o = $('<div>' + this + '</div>').css({
    'position': 'absolute',
    'float': 'left',
    'white-space': 'nowrap',
    'visibility': 'hidden',
    'font': f
  }).appendTo($('body'));
  w = o.width();
  o.remove();
  return w;
};

$(function() {
  $('#logo').click((function(_this) {
    return function(e) {
      e.preventDefault();
      $('html, body').scrollTop(0);
      $('.pages .page.active').removeClass('active');
      return $('.pages .page.frontpage').addClass('active');
    };
  })(this));
  $('*[data-target]').click((function(_this) {
    return function(e) {
      e.preventDefault();
      $('html, body').scrollTop(0);
      $('.pages .page.active').removeClass('active');
      $('.pages .page.' + $(e.currentTarget).data('target')).addClass('active');
      switch ($(e.currentTarget).data('target')) {
        case 'set':
          return _this.Player.initPlayer(Data.Sets[0]);
        default:
          return _this.Player.destroyPlayer();
      }
    };
  })(this));
  $('.open-mobile-menu').click((function(_this) {
    return function(e) {
      e.preventDefault();
      $('#overlay').addClass('show');
      return $('body').addClass('mobile-menu-open');
    };
  })(this));
  $('#overlay').click((function(_this) {
    return function(e) {
      $('#overlay').removeClass('show');
      return $('body').removeClass('mobile-menu-open');
    };
  })(this));
  $('.slideshow').each(function() {
    var goTo, resizeTimeout, slideWidth, wrapperWidth;
    $(this).data('current-slide', 0);
    slideWidth = $(this).width();
    wrapperWidth = $('.slide', this).length * slideWidth;
    $('.slide', this).width(slideWidth + 'px');
    $('.slides', this).width(wrapperWidth + 'px');
    goTo = (function(_this) {
      return function(n) {
        var slides;
        slides = $('.slide', _this);
        if (n < 0) {
          n = slides.length - 1;
        }
        if (n >= slides.length) {
          n = 0;
        }
        $('.slides', _this).css('transform', 'translateX(-' + n * slides.width() + 'px)');
        $(_this).data('current-slide', n);
        $('.slide.active', _this).removeClass('active');
        $('.slide', _this).eq(n).addClass('active');
        $('.bullets a.active', _this).removeClass('active');
        return $('.bullets a', _this).eq(n).addClass('active');
      };
    })(this);
    $('.next', this).on('click', (function(_this) {
      return function(e) {
        e.preventDefault();
        return goTo($(_this).data('current-slide') + 1);
      };
    })(this));
    $('.prev', this).on('click', (function(_this) {
      return function(e) {
        e.preventDefault();
        return goTo($(_this).data('current-slide') - 1);
      };
    })(this));
    $('.bullets a', this).on('click', (function(_this) {
      return function(e) {
        e.preventDefault();
        return goTo($(e.currentTarget).index());
      };
    })(this));
    resizeTimeout = null;
    return $(window).resize((function(_this) {
      return function() {
        clearTimeout(resizeTimeout);
        return resizeTimeout = setTimeout(function() {
          if ($(_this).is(':visible')) {
            slideWidth = $(_this).width();
          } else {
            slideWidth = $(window).width();
          }
          wrapperWidth = $('.slide', _this).length * slideWidth;
          $('.slide', _this).width(slideWidth + 'px');
          $('.slides', _this).width(wrapperWidth + 'px');
          return goTo($(_this).data('current-slide'));
        }, 400);
      };
    })(this));
  });
  $('#timeline .play').on('click', (function(_this) {
    return function(e) {
      if (!_this.Player.player) {
        return;
      }
      if (_this.Player.isPlaying) {
        return _this.Player.player.pauseVideo();
      } else {
        return _this.Player.player.playVideo();
      }
    };
  })(this));
  $('#timeline .bar').on('click', (function(_this) {
    return function(e) {
      var pos, s, w;
      if (!_this.Player.player) {
        return;
      }
      w = $('#timeline .line').width();
      pos = (e.pageX - e.currentTarget.offsetLeft) - 10;
      if (pos < 0) {
        pos = 0;
      }
      if (pos > w) {
        pos = w;
      }
      pos = pos / w;
      s = Math.round(pos * _this.Player.duration);
      return _this.Player.player.seekTo(s);
    };
  })(this));
  $('#playlist').on('click', '.track .info', (function(_this) {
    return function(e) {
      if (!_this.Player.player) {
        return;
      }
      $('#playlist .track.open').removeClass('open');
      _this.Player.player.seekTo($(e.currentTarget).parents('.track').data('start'));
      return console.log('seekTo', $(e.currentTarget).parents('.track').data('start'));
    };
  })(this));
  $('#playlist').on('click', '.track .download', (function(_this) {
    return function(e) {
      e.preventDefault();
      e.stopImmediatePropagation();
      $('#playlist .track.open').removeClass('open');
      return $(e.currentTarget).parents('.track').addClass('open');
    };
  })(this));
  return this.Player = {
    destroyPlayer: function() {
      this.player = null;
      clearInterval(this.durationInt);
      return $('#video').html($('<div id="youtube-player"></div>'));
    },
    initPlayer: function(setData) {
      var $controls, $playlist, $video, aw, t, track, tracks, tw, _i, _len, _ref;
      this.setData = setData;
      $video = $('#video');
      $controls = $('#timeline');
      $playlist = $('#playlist');
      $controls.find('play').removeClass('playing');
      tracks = document.createDocumentFragment();
      _ref = this.setData.tracks;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        track = _ref[_i];
        tw = String(track.title).width('20px "ProximaSemiBold", "Helvetica Neue", Helvetica, Arial, sans-serif');
        aw = String(track.artist).width('20px "ProximaSemiBold", "Helvetica Neue", Helvetica, Arial, sans-serif');
        track.titleScrolling = tw > 240;
        track.artistScrolling = aw > 240;
        t = templates.playlist.track.tmpl(track);
        $(tracks).append(t);
        track.active = false;
      }
      $playlist.html(tracks);
      this.playing = (function(_this) {
        return function(play) {
          if (play) {
            _this.isPlaying = true;
            $controls.find('.play').addClass('playing');
            $playlist.addClass('playing');
            return _this.durationInt = setInterval(function() {
              var l, s, _j, _k, _len1, _len2, _ref1, _ref2;
              _this.currentTime = _this.player.getCurrentTime();
              l = null;
              _ref1 = _this.setData.tracks;
              for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
                track = _ref1[_j];
                if (track.startsAt <= _this.currentTime) {
                  l = track;
                }
              }
              if (!l.active) {
                _ref2 = _this.setData.tracks;
                for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {
                  track = _ref2[_k];
                  track.active = false;
                }
                l.active = true;
                $playlist.find('.track.current').removeClass('current');
                $playlist.find('.track[data-start="' + l.startsAt + '"]').addClass('current');
              }
              $controls.find('.pos').css('left', (_this.currentTime / _this.duration) * 100 + '%');
              s = Math.floor(_this.currentTime % 60);
              if (s < 10) {
                s = '0' + s;
              }
              return $controls.find('.current-time').html(Math.floor(_this.currentTime / 60) + ':' + s);
            }, 500);
          } else {
            _this.isPlaying = false;
            $controls.find('.play').removeClass('playing');
            $playlist.removeClass('playing');
            return clearInterval(_this.durationInt);
          }
        };
      })(this);
      this.onPlayerReady = (function(_this) {
        return function(e) {
          var bar, fragment, pos, _j, _len1, _ref1;
          _this.duration = _this.player.getDuration();
          fragment = document.createDocumentFragment();
          _ref1 = _this.setData.tracks;
          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
            track = _ref1[_j];
            pos = track.startsAt / _this.duration;
            bar = document.createElement('span');
            bar.className = 'track';
            bar.style.left = pos * 100 + '%';
            fragment.appendChild(bar);
          }
          $('#timeline .line .tracks').html(fragment);
          $('#timeline .total-time').html(Math.floor(_this.duration / 60) + ':' + Math.floor(_this.duration % 60));
          return $('#timeline .current-time').html('0:00');
        };
      })(this);
      this.onPlayerStateChange = (function(_this) {
        return function(e) {
          switch (e.data) {
            case 1:
              return _this.playing(true);
            case 2:
              return _this.playing(false);
          }
        };
      })(this);
      return YT.ready((function(_this) {
        return function() {
          return _this.player = new YT.Player('youtube-player', {
            height: '100%',
            width: '100%',
            videoId: setData.videoId,
            playerVars: {
              rel: 0,
              theme: 'light',
              showinfo: 0,
              controls: 0,
              autohide: 1,
              modestbranding: 1,
              cc_load_policy: 0,
              iv_load_policy: 3
            },
            events: {
              'onReady': _this.onPlayerReady,
              'onStateChange': _this.onPlayerStateChange
            }
          });
        };
      })(this));
    }
  };
});

//# sourceMappingURL=data:application/json;base64,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Q0FBRixDQVRBLENBQUEiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8iLCJzb3VyY2VzQ29udGVudCI6WyJTdHJpbmcucHJvdG90eXBlLndpZHRoID0gKGZvbnRTdHlsZSkgLT5cbiAgZiA9IGZvbnRTdHlsZSB8fCAnMTJweCBhcmlhbCdcbiAgbyA9ICQoJzxkaXY+JyArIHRoaXMgKyAnPC9kaXY+JylcbiAgICAgIC5jc3MoeyAncG9zaXRpb24nOiAnYWJzb2x1dGUnLCAnZmxvYXQnOiAnbGVmdCcsICd3aGl0ZS1zcGFjZSc6ICdub3dyYXAnLCAndmlzaWJpbGl0eSc6ICdoaWRkZW4nLCAnZm9udCc6IGYgfSlcbiAgICAgIC5hcHBlbmRUbygkKCdib2R5JykpXG4gIHcgPSBvLndpZHRoKClcbiAgby5yZW1vdmUoKVxuICB3XG5cbiQgLT5cblxuICAkKCcjbG9nbycpLmNsaWNrIChlKSA9PlxuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICQoJ2h0bWwsIGJvZHknKS5zY3JvbGxUb3AgMFxuICAgICQoJy5wYWdlcyAucGFnZS5hY3RpdmUnKS5yZW1vdmVDbGFzcyAnYWN0aXZlJ1xuICAgICQoJy5wYWdlcyAucGFnZS5mcm9udHBhZ2UnKS5hZGRDbGFzcyAnYWN0aXZlJ1xuXG4gICQoJypbZGF0YS10YXJnZXRdJykuY2xpY2sgKGUpID0+XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgJCgnaHRtbCwgYm9keScpLnNjcm9sbFRvcCAwXG4gICAgJCgnLnBhZ2VzIC5wYWdlLmFjdGl2ZScpLnJlbW92ZUNsYXNzICdhY3RpdmUnXG4gICAgJCgnLnBhZ2VzIC5wYWdlLicgKyAkKGUuY3VycmVudFRhcmdldCkuZGF0YSgndGFyZ2V0JykpLmFkZENsYXNzICdhY3RpdmUnXG4gICAgc3dpdGNoICQoZS5jdXJyZW50VGFyZ2V0KS5kYXRhKCd0YXJnZXQnKVxuICAgICAgd2hlbiAnc2V0JyB0aGVuIEBQbGF5ZXIuaW5pdFBsYXllciBEYXRhLlNldHNbMF1cbiAgICAgIGVsc2UgQFBsYXllci5kZXN0cm95UGxheWVyKClcblxuICAkKCcub3Blbi1tb2JpbGUtbWVudScpLmNsaWNrIChlKSA9PlxuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICQoJyNvdmVybGF5JykuYWRkQ2xhc3MgJ3Nob3cnXG4gICAgJCgnYm9keScpLmFkZENsYXNzICdtb2JpbGUtbWVudS1vcGVuJ1xuXG4gICQoJyNvdmVybGF5JykuY2xpY2sgKGUpID0+XG4gICAgJCgnI292ZXJsYXknKS5yZW1vdmVDbGFzcyAnc2hvdydcbiAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MgJ21vYmlsZS1tZW51LW9wZW4nXG5cbiAgJCgnLnNsaWRlc2hvdycpLmVhY2ggLT5cblxuICAgICQodGhpcykuZGF0YSAnY3VycmVudC1zbGlkZScsIDBcblxuICAgIHNsaWRlV2lkdGggPSAkKHRoaXMpLndpZHRoKClcbiAgICB3cmFwcGVyV2lkdGggPSAkKCcuc2xpZGUnLCB0aGlzKS5sZW5ndGggKiBzbGlkZVdpZHRoXG5cbiAgICAkKCcuc2xpZGUnLCB0aGlzKS53aWR0aCBzbGlkZVdpZHRoICsgJ3B4J1xuICAgICQoJy5zbGlkZXMnLCB0aGlzKS53aWR0aCB3cmFwcGVyV2lkdGggKyAncHgnXG5cbiAgICBnb1RvID0gKG4pID0+XG4gICAgICBzbGlkZXMgPSAkKCcuc2xpZGUnLCB0aGlzKVxuICAgICAgbiA9IHNsaWRlcy5sZW5ndGggLSAxIGlmIG4gPCAwXG4gICAgICBuID0gMCBpZiBuID49IHNsaWRlcy5sZW5ndGhcbiAgICAgICQoJy5zbGlkZXMnLCB0aGlzKS5jc3MgJ3RyYW5zZm9ybScsICd0cmFuc2xhdGVYKC0nICsgbiAqIHNsaWRlcy53aWR0aCgpICsgJ3B4KSdcbiAgICAgICQodGhpcykuZGF0YSAnY3VycmVudC1zbGlkZScsIG5cbiAgICAgICQoJy5zbGlkZS5hY3RpdmUnLCB0aGlzKS5yZW1vdmVDbGFzcyAnYWN0aXZlJ1xuICAgICAgJCgnLnNsaWRlJywgdGhpcykuZXEobikuYWRkQ2xhc3MgJ2FjdGl2ZSdcbiAgICAgICQoJy5idWxsZXRzIGEuYWN0aXZlJywgdGhpcykucmVtb3ZlQ2xhc3MgJ2FjdGl2ZSdcbiAgICAgICQoJy5idWxsZXRzIGEnLCB0aGlzKS5lcShuKS5hZGRDbGFzcyAnYWN0aXZlJ1xuXG4gICAgJCgnLm5leHQnLCB0aGlzKS5vbiAnY2xpY2snLCAoZSkgPT5cbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgZ29UbyAkKHRoaXMpLmRhdGEoJ2N1cnJlbnQtc2xpZGUnKSArIDFcblxuICAgICQoJy5wcmV2JywgdGhpcykub24gJ2NsaWNrJywgKGUpID0+XG4gICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgIGdvVG8gJCh0aGlzKS5kYXRhKCdjdXJyZW50LXNsaWRlJykgLSAxXG5cbiAgICAkKCcuYnVsbGV0cyBhJywgdGhpcykub24gJ2NsaWNrJywgKGUpID0+XG4gICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgIGdvVG8gJChlLmN1cnJlbnRUYXJnZXQpLmluZGV4KClcblxuICAgIHJlc2l6ZVRpbWVvdXQgPSBudWxsXG4gICAgJCh3aW5kb3cpLnJlc2l6ZSA9PlxuICAgICAgY2xlYXJUaW1lb3V0IHJlc2l6ZVRpbWVvdXRcbiAgICAgIHJlc2l6ZVRpbWVvdXQgPSBzZXRUaW1lb3V0ID0+XG4gICAgICAgIGlmICQodGhpcykuaXMoJzp2aXNpYmxlJylcbiAgICAgICAgICBzbGlkZVdpZHRoID0gJCh0aGlzKS53aWR0aCgpXG4gICAgICAgIGVsc2VcbiAgICAgICAgICBzbGlkZVdpZHRoID0gJCh3aW5kb3cpLndpZHRoKClcbiAgICAgICAgd3JhcHBlcldpZHRoID0gJCgnLnNsaWRlJywgdGhpcykubGVuZ3RoICogc2xpZGVXaWR0aFxuICAgICAgICAkKCcuc2xpZGUnLCB0aGlzKS53aWR0aCBzbGlkZVdpZHRoICsgJ3B4J1xuICAgICAgICAkKCcuc2xpZGVzJywgdGhpcykud2lkdGggd3JhcHBlcldpZHRoICsgJ3B4J1xuICAgICAgICBnb1RvICQodGhpcykuZGF0YSAnY3VycmVudC1zbGlkZSdcbiAgICAgICwgNDAwXG5cbiAgJCgnI3RpbWVsaW5lIC5wbGF5Jykub24gJ2NsaWNrJywgKGUpID0+XG4gICAgcmV0dXJuIGlmICFAUGxheWVyLnBsYXllclxuICAgIGlmIEBQbGF5ZXIuaXNQbGF5aW5nXG4gICAgICBAUGxheWVyLnBsYXllci5wYXVzZVZpZGVvKClcbiAgICBlbHNlXG4gICAgICBAUGxheWVyLnBsYXllci5wbGF5VmlkZW8oKVxuXG4gICQoJyN0aW1lbGluZSAuYmFyJykub24gJ2NsaWNrJywgKGUpID0+XG4gICAgcmV0dXJuIGlmICFAUGxheWVyLnBsYXllclxuICAgIHcgPSAkKCcjdGltZWxpbmUgLmxpbmUnKS53aWR0aCgpXG4gICAgcG9zID0gKGUucGFnZVggLSBlLmN1cnJlbnRUYXJnZXQub2Zmc2V0TGVmdCkgLSAxMFxuICAgIHBvcyA9IDAgaWYgcG9zIDwgMFxuICAgIHBvcyA9IHcgaWYgcG9zID4gd1xuICAgIHBvcyA9IHBvcyAvIHdcbiAgICBzID0gTWF0aC5yb3VuZChwb3MgKiBAUGxheWVyLmR1cmF0aW9uKVxuICAgIEBQbGF5ZXIucGxheWVyLnNlZWtUbyhzKVxuXG4gICQoJyNwbGF5bGlzdCcpLm9uICdjbGljaycsICcudHJhY2sgLmluZm8nLCAoZSkgPT5cbiAgICByZXR1cm4gaWYgIUBQbGF5ZXIucGxheWVyXG4gICAgJCgnI3BsYXlsaXN0IC50cmFjay5vcGVuJykucmVtb3ZlQ2xhc3MgJ29wZW4nXG4gICAgQFBsYXllci5wbGF5ZXIuc2Vla1RvICQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcudHJhY2snKS5kYXRhKCdzdGFydCcpXG4gICAgY29uc29sZS5sb2cgJ3NlZWtUbycsICQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcudHJhY2snKS5kYXRhKCdzdGFydCcpXG5cbiAgJCgnI3BsYXlsaXN0Jykub24gJ2NsaWNrJywgJy50cmFjayAuZG93bmxvYWQnLCAoZSkgPT5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAkKCcjcGxheWxpc3QgLnRyYWNrLm9wZW4nKS5yZW1vdmVDbGFzcyAnb3BlbidcbiAgICAkKGUuY3VycmVudFRhcmdldCkucGFyZW50cygnLnRyYWNrJykuYWRkQ2xhc3MgJ29wZW4nXG5cbiAgQFBsYXllciA9XG5cbiAgICBkZXN0cm95UGxheWVyOiAtPlxuICAgICAgQHBsYXllciA9IG51bGxcbiAgICAgIGNsZWFySW50ZXJ2YWwgQGR1cmF0aW9uSW50XG4gICAgICAkKCcjdmlkZW8nKS5odG1sICQoJzxkaXYgaWQ9XCJ5b3V0dWJlLXBsYXllclwiPjwvZGl2PicpXG5cbiAgICBpbml0UGxheWVyOiAoQHNldERhdGEpIC0+XG5cbiAgICAgICR2aWRlbyAgICA9ICQoJyN2aWRlbycpXG4gICAgICAkY29udHJvbHMgPSAkKCcjdGltZWxpbmUnKVxuICAgICAgJHBsYXlsaXN0ID0gJCgnI3BsYXlsaXN0JylcblxuICAgICAgJGNvbnRyb2xzLmZpbmQoJ3BsYXknKS5yZW1vdmVDbGFzcyAncGxheWluZydcblxuICAgICAgIyBwb3B1bGF0ZSB0cmFja3NcbiAgICAgIHRyYWNrcyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKVxuICAgICAgZm9yIHRyYWNrIGluIEBzZXREYXRhLnRyYWNrc1xuICAgICAgICB0dyA9IFN0cmluZyh0cmFjay50aXRsZSkud2lkdGgoJzIwcHggXCJQcm94aW1hU2VtaUJvbGRcIiwgXCJIZWx2ZXRpY2EgTmV1ZVwiLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmJylcbiAgICAgICAgYXcgPSBTdHJpbmcodHJhY2suYXJ0aXN0KS53aWR0aCgnMjBweCBcIlByb3hpbWFTZW1pQm9sZFwiLCBcIkhlbHZldGljYSBOZXVlXCIsIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYnKVxuICAgICAgICB0cmFjay50aXRsZVNjcm9sbGluZyA9IHR3ID4gMjQwXG4gICAgICAgIHRyYWNrLmFydGlzdFNjcm9sbGluZyA9IGF3ID4gMjQwXG4gICAgICAgIHQgPSB0ZW1wbGF0ZXMucGxheWxpc3QudHJhY2sudG1wbCh0cmFjaylcbiAgICAgICAgJCh0cmFja3MpLmFwcGVuZCB0XG4gICAgICAgIHRyYWNrLmFjdGl2ZSA9IGZhbHNlXG4gICAgICAkcGxheWxpc3QuaHRtbCB0cmFja3NcblxuXG4gICAgICBAcGxheWluZyA9IChwbGF5KSA9PlxuICAgICAgICBpZiBwbGF5XG4gICAgICAgICAgQGlzUGxheWluZyA9IHRydWVcbiAgICAgICAgICAkY29udHJvbHMuZmluZCgnLnBsYXknKS5hZGRDbGFzcyAncGxheWluZydcbiAgICAgICAgICAkcGxheWxpc3QuYWRkQ2xhc3MgJ3BsYXlpbmcnXG4gICAgICAgICAgQGR1cmF0aW9uSW50ID0gc2V0SW50ZXJ2YWwgPT5cbiAgICAgICAgICAgIEBjdXJyZW50VGltZSA9IEBwbGF5ZXIuZ2V0Q3VycmVudFRpbWUoKVxuICAgICAgICAgICAgbCA9IG51bGxcbiAgICAgICAgICAgIGZvciB0cmFjayBpbiBAc2V0RGF0YS50cmFja3NcbiAgICAgICAgICAgICAgbCA9IHRyYWNrIGlmIHRyYWNrLnN0YXJ0c0F0IDw9IEBjdXJyZW50VGltZVxuICAgICAgICAgICAgaWYgIWwuYWN0aXZlXG4gICAgICAgICAgICAgIHRyYWNrLmFjdGl2ZSA9IGZhbHNlIGZvciB0cmFjayBpbiBAc2V0RGF0YS50cmFja3NcbiAgICAgICAgICAgICAgbC5hY3RpdmUgPSB0cnVlXG4gICAgICAgICAgICAgICRwbGF5bGlzdC5maW5kKCcudHJhY2suY3VycmVudCcpLnJlbW92ZUNsYXNzICdjdXJyZW50J1xuICAgICAgICAgICAgICAkcGxheWxpc3QuZmluZCgnLnRyYWNrW2RhdGEtc3RhcnQ9XCInICsgbC5zdGFydHNBdCArICdcIl0nKS5hZGRDbGFzcyAnY3VycmVudCdcbiAgICAgICAgICAgICRjb250cm9scy5maW5kKCcucG9zJykuY3NzICdsZWZ0JywgKEBjdXJyZW50VGltZSAvIEBkdXJhdGlvbikgKiAxMDAgKyAnJSdcbiAgICAgICAgICAgIHMgPSBNYXRoLmZsb29yKEBjdXJyZW50VGltZSU2MClcbiAgICAgICAgICAgIHMgPSAnMCcgKyBzIGlmIHMgPCAxMFxuICAgICAgICAgICAgJGNvbnRyb2xzLmZpbmQoJy5jdXJyZW50LXRpbWUnKS5odG1sIE1hdGguZmxvb3IoQGN1cnJlbnRUaW1lLzYwKSArICc6JyArIHNcbiAgICAgICAgICAsIDUwMFxuICAgICAgICBlbHNlXG4gICAgICAgICAgQGlzUGxheWluZyA9IGZhbHNlXG4gICAgICAgICAgJGNvbnRyb2xzLmZpbmQoJy5wbGF5JykucmVtb3ZlQ2xhc3MgJ3BsYXlpbmcnXG4gICAgICAgICAgJHBsYXlsaXN0LnJlbW92ZUNsYXNzICdwbGF5aW5nJ1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwgQGR1cmF0aW9uSW50XG5cbiAgICAgIEBvblBsYXllclJlYWR5ID0gKGUpID0+XG4gICAgICAgIEBkdXJhdGlvbiA9IEBwbGF5ZXIuZ2V0RHVyYXRpb24oKVxuICAgICAgICBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKVxuICAgICAgICBmb3IgdHJhY2sgaW4gQHNldERhdGEudHJhY2tzXG4gICAgICAgICAgcG9zID0gdHJhY2suc3RhcnRzQXQgLyBAZHVyYXRpb25cbiAgICAgICAgICBiYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcbiAgICAgICAgICBiYXIuY2xhc3NOYW1lID0gJ3RyYWNrJ1xuICAgICAgICAgIGJhci5zdHlsZS5sZWZ0ID0gcG9zKjEwMCArICclJ1xuICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkIGJhclxuICAgICAgICAkKCcjdGltZWxpbmUgLmxpbmUgLnRyYWNrcycpLmh0bWwgZnJhZ21lbnRcbiAgICAgICAgJCgnI3RpbWVsaW5lIC50b3RhbC10aW1lJykuaHRtbCBNYXRoLmZsb29yKEBkdXJhdGlvbi82MCkgKyAnOicgKyBNYXRoLmZsb29yKEBkdXJhdGlvbiU2MClcbiAgICAgICAgJCgnI3RpbWVsaW5lIC5jdXJyZW50LXRpbWUnKS5odG1sICcwOjAwJztcblxuICAgICAgQG9uUGxheWVyU3RhdGVDaGFuZ2UgPSAoZSkgPT5cbiAgICAgICAgc3dpdGNoIGUuZGF0YVxuICAgICAgICAgIHdoZW4gMVxuICAgICAgICAgICAgQHBsYXlpbmcgdHJ1ZVxuICAgICAgICAgIHdoZW4gMlxuICAgICAgICAgICAgQHBsYXlpbmcgZmFsc2VcblxuICAgICAgWVQucmVhZHkgPT5cbiAgICAgICAgQHBsYXllciA9IG5ldyBZVC5QbGF5ZXIgJ3lvdXR1YmUtcGxheWVyJyxcbiAgICAgICAgICBoZWlnaHQ6ICcxMDAlJ1xuICAgICAgICAgIHdpZHRoOiAnMTAwJSdcbiAgICAgICAgICB2aWRlb0lkOiBzZXREYXRhLnZpZGVvSWRcbiAgICAgICAgICBwbGF5ZXJWYXJzOiB7IHJlbDogMCwgdGhlbWU6ICdsaWdodCcsIHNob3dpbmZvOiAwLCBjb250cm9sczogMCwgYXV0b2hpZGU6IDEsIG1vZGVzdGJyYW5kaW5nOiAxLCBjY19sb2FkX3BvbGljeTogMCwgaXZfbG9hZF9wb2xpY3k6IDMgfVxuICAgICAgICAgIGV2ZW50czogeyAnb25SZWFkeSc6IEBvblBsYXllclJlYWR5LCAnb25TdGF0ZUNoYW5nZSc6IEBvblBsYXllclN0YXRlQ2hhbmdlIH1cblxuXG5cbiJdfQ==